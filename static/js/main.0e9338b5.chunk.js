(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(42),c=a.n(o),i=(a(90),a(23)),l=(a(91),a(92),a(27)),s=a(37),u=a(76),m=a.n(u),p=a(14);var h=function(e){var t=e.id,a=e.children,n=e.height,o=e.colClass,c=e.backgroundColor,i=e.minHeight;return r.a.createElement(p.a,{id:t,style:{height:n,backgroundColor:c,minHeight:i}},r.a.createElement("div",{className:"col ".concat(o," ml-auto mr-auto my-auto")},a))};var d=function(e){var t=e.props,a=e.setUnit;return r.a.createElement(l.a,t,r.a.createElement(l.a.Item,null,r.a.createElement(l.a.Link,{as:s.b,to:"/Weather/"},"Home")),r.a.createElement(l.a.Item,null,r.a.createElement(l.a.Link,{as:s.b,to:"/Weather/timemachine"},"Time Machine")),r.a.createElement(l.a.Item,{bsPrefix:"ml-auto mr-3"},r.a.createElement(h,{height:"100%",colClass:"col-auto"},r.a.createElement(m.a,{offlabel:"\xb0C",onlabel:"\xb0F",size:"sm",onstyle:"dark",offstyle:"secondary",checked:!0,onChange:function(){"F"===sessionStorage.unit?a("C"):a("F")}}))))},f=a(8);var y=function(e){var t=e.style,a=e.location;return r.a.createElement("div",{style:t,className:"location"},a)},g=a(79);var E=function(e){var t=e.options;return Object(n.useEffect)((function(){var e=new g.Skycons({color:t.color});e.add("icon".concat(t.instance),void 0!==t.icon?t.icon:"rain"),e.play()})),r.a.createElement("canvas",{style:{marginTop:t.top},id:"icon".concat(t.instance),width:t.iconWidth,height:t.iconHeight})};var b=function(e){var t=e.style,a=e.tempC,n=e.tempF;return"C"===e.unit?r.a.createElement("div",{style:t,className:"temp-c"},a):r.a.createElement("div",{style:t,className:"temp-f"},n)};var v=function(e){var t=e.style,a=e.description;return r.a.createElement("div",{style:t,className:"description"},a)};var w=function(e){var t=e.style;return r.a.createElement("div",{className:"footer",style:t},"Copyright \xa9 2020. Developed by Kolawole Campbell.")},x=a(38),S=a(24),O=a.n(S),C=a(39);function k(){return j.apply(this,arguments)}function j(){return(j=Object(C.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(JSON.parse(sessionStorage.position));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(C.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(JSON.parse(sessionStorage.position),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return N.apply(this,arguments)}function N(){return(N=Object(C.a)(O.a.mark((function e(t){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://cors-anywhere.herokuapp.com/\n     https://api.darksky.net/forecast/9ab479cdd941d8bb66332fa8f81551b9/\n     ".concat(t.lat,",").concat(t.long).replace(/\s/g,""),e.next=3,fetch(a,{});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return W.apply(this,arguments)}function W(){return(W=Object(C.a)(O.a.mark((function e(t,a){var n,r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://cors-anywhere.herokuapp.com/\n     https://api.darksky.net/forecast/9ab479cdd941d8bb66332fa8f81551b9/\n     ".concat(t.lat,",").concat(t.long,",").concat(a).replace(/\s/g,""),e.next=3,fetch(n,{});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a,n){(function(e){return M.apply(this,arguments)})(Math.round(n.getTime()/1e3)).then((function(e){console.log("TMWeather"),t.location=e.timezone.split("/")[1].replace("_"," "),t.tempF=Math.round(e.daily.data[0].temperatureHigh),t.tempC=Math.round(I(e.daily.data[0].temperatureHigh)),t.icon=e.currently.icon,t.description=e.daily.data[0].summary,sessionStorage.setItem("TMWeather",JSON.stringify(e)),a(!0)}))}function I(e){return 5*(e-32)/9}function H(e){var t=new Date(0);return t.setUTCSeconds(e),t}var J=function(e){var t=e.day,a=e.precipitation,n=e.high,o=e.icon,c=e.low,i=e.unit,l=Math.round(I(c)),s=Math.round(I(n)),u={textAlign:"left",margin:"0.2vw"};return r.a.createElement(p.a,{style:Object(x.a)({},u)},r.a.createElement(f.a,{bsPrefix:"col col-3 my-auto"},"".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()])),r.a.createElement(f.a,{style:{paddingRight:"0px"},bsPrefix:"col col-3 my-auto precipitation"},"".concat(Math.round(100*a),"%")),r.a.createElement(f.a,{style:{paddingLeft:"0px"},bsPrefix:"col my-auto"},r.a.createElement(E,{options:{color:"white",icon:o,iconHeight:40,iconWidth:40,instance:t.getDay()+2}})),r.a.createElement(f.a,{bsPrefix:"col my-auto"},r.a.createElement(b,{style:u,tempC:l,tempF:c,unit:i})),r.a.createElement(f.a,{bsPrefix:"col my-auto"},r.a.createElement(b,{style:u,tempC:s,tempF:n,unit:i})))};var L=function(e){var t=e.day,a=e.precipitation,n=e.icon,o=e.temp,c=e.unit,i=e.appTemp,l=e.summary,s=Math.round(I(o)),u=Math.round(I(i)),m={textAlign:"left",margin:"0.2vw",width:"100%"},h="col col-auto my-auto ml-auto mr-auto";return r.a.createElement(p.a,{style:Object(x.a)(Object(x.a)({},m),{},{borderTop:"1px solid white",borderBottom:"1px solid white"})},r.a.createElement(f.a,{bsPrefix:"col col-1 my-auto ml-auto mr-auto"},"".concat(t.getHours(),":00")),r.a.createElement(f.a,{bsPrefix:"col col-2 my-auto ml-auto mr-auto"},"".concat(l)),r.a.createElement(f.a,{bsPrefix:"col col-auto my-auto ml-auto mr-auto d-none d-sm-block"},r.a.createElement(E,{options:{top:"3px",color:"white",icon:n,iconHeight:30,iconWidth:30,instance:t.getHours()+10}})),r.a.createElement(f.a,{style:{lineHeight:"2rem"},bsPrefix:"col col-auto my-auto ml-auto mr-auto precipitation"},"".concat(Math.round(100*a),"%")),r.a.createElement(f.a,{bsPrefix:h},r.a.createElement(b,{style:m,tempC:s,tempF:o,unit:c})),r.a.createElement(f.a,{bsPrefix:h},r.a.createElement(b,{style:m,tempC:u,tempF:i,unit:c})))};var z=function(e){var t=e.id,a=e.unit,n=e.tm,o=JSON.parse(sessionStorage.weather),c=o.daily.data;return sessionStorage.weather?(n?c=(o=JSON.parse(sessionStorage.TMWeather)).hourly.data:c.pop(),r.a.createElement(p.a,{id:t,style:{paddingTop:"5px"}},r.a.createElement(f.a,{bsPrefix:"col col-xs-auto ".concat("col-lg-6"," mr-auto ml-auto")},n?c.map((function(e,t){return r.a.createElement(h,{key:t,minHeight:"60px",colClass:"col-12"},r.a.createElement(L,{day:H(e.time),temp:Math.round(e.temperature),icon:e.icon,precipitation:e.precipProbability,unit:a,summary:e.summary,appTemp:Math.round(e.apparentTemperature)}))})):c.map((function(e,t){return r.a.createElement(J,{day:H(e.time),high:Math.round(e.temperatureHigh),icon:e.icon,low:Math.round(e.temperatureLow),key:t,precipitation:e.precipProbability,unit:a})}))))):r.a.createElement("div",null)};var B=function(e){var t=e.weatherInfo,a=e.loaded,o=e.setLoaded,c=(e.setWeather,e.unit);return Object(n.useEffect)((function(){!function(e,t,a){k().then((function(e){t.location=e.timezone.split("/")[1].replace("_"," "),t.tempF=Math.round(e.currently.temperature),t.tempC=Math.round(I(e.currently.temperature)),t.icon=e.currently.icon,t.description=e.currently.summary,sessionStorage.setItem("weather",JSON.stringify(e)),a(!0)}))}(0,t,o),sessionStorage.setItem("unit",c)}),[a,c]),r.a.createElement("div",{className:"main"},r.a.createElement(h,{id:"home",colClass:"col-xs-auto col-lg-6",height:"100%"},r.a.createElement(p.a,{style:{margin:"40px 0 60px 0"}},r.a.createElement(f.a,null,r.a.createElement(h,{colClass:"col-auto",height:"100%"},r.a.createElement(y,{style:{fontSize:"2.7em"},location:t.location}))),r.a.createElement(f.a,null,r.a.createElement(h,{colClass:"col-auto",height:"100%"},r.a.createElement(E,{options:t})))),r.a.createElement(p.a,{style:{margin:"0 0 40px 0"}},r.a.createElement(f.a,null,r.a.createElement(h,{colClass:"col-auto",height:"100%"},r.a.createElement(b,{style:{textAlign:"center",fontSize:"3rem"},tempC:t.tempC,tempF:t.tempF,unit:sessionStorage.unit}),r.a.createElement(v,{style:{fontSize:"1rem"},description:t.description}))))),r.a.createElement(z,{id:"forecast",unit:sessionStorage.unit}),r.a.createElement(w,{style:{position:"absolute"}}))},D=a(11),A=a(81),U=a.n(A),_=(a(119),a(84)),K=a(80),R=a.n(K);var $=function(e){var t=e.name,a=e.color;return r.a.createElement(h,{backgroundColor:"rgb(36,36,36)",height:"100vh",colClass:"col-auto loading"},r.a.createElement(R.a,{name:t,color:a}))};var q=function(e){var t=e.unit,a="col col-auto my-auto ml-auto mr-auto",o=Object(n.useState)(JSON.parse(sessionStorage.TMWeather)),c=Object(i.a)(o,2),l=c[0],s=(c[1],Object(n.useState)(!1)),u=Object(i.a)(s,2),m=u[0],d=u[1],y=Object(n.useState)(new Date),g=Object(i.a)(y,2),E=g[0],b=g[1];return Object(n.useEffect)((function(){m||F(0,l,d,E)}),[m,E]),m?r.a.createElement("div",{className:"main"},r.a.createElement(h,{height:"25vh",colClass:"col-auto"},r.a.createElement(_.a,null,r.a.createElement(U.a,{selected:E,className:"form-control",onChange:function(e){d(!1),b(e)}}))),r.a.createElement(h,{height:"100%",colClass:"col col-lg-6"},r.a.createElement(p.a,{style:{textAlign:"left",color:"white",margin:"0.2vw",width:"100%",borderTop:"1px solid white",borderBottom:"1px solid white",height:"40px",fontWeight:"bold"}},r.a.createElement(f.a,{bsPrefix:"col col-1 my-auto ml-auto mr-auto"},"Time"),r.a.createElement(f.a,{style:{marginLeft:"5%"},bsPrefix:"col col-2 my-auto mr-auto"},"Desc"),r.a.createElement(f.a,{bsPrefix:"col col-auto my-auto ml-auto mr-auto d-none d-sm-block"},"Skycon"),r.a.createElement(f.a,{bsPrefix:a},"Rain %"),r.a.createElement(f.a,{bsPrefix:a},"Temp"),r.a.createElement(f.a,{bsPrefix:a},"Feels"))),r.a.createElement(z,{id:"time-machine",unit:t,tm:!0}),r.a.createElement(w,{style:{position:"relative"}})):r.a.createElement($,{name:"rotating-plane",color:"white"})};var G=function(){var e={color:"white"},t=Object(n.useState)(e),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],p=u[1],f=Object(n.useState)("F"),y=Object(i.a)(f,2),g=y[0],E=y[1],b=Object(n.useState)(!1),v=Object(i.a)(b,2),w=v[0],x=v[1];return sessionStorage.setItem("unit",g),Object(n.useEffect)((function(){!function(e,t,a,n){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){console.log("init"),e.long=n.coords.longitude,e.lat=n.coords.latitude,sessionStorage.setItem("position",JSON.stringify(e)),k().then((function(e){t.location=e.timezone.split("/")[1].replace("_"," "),t.tempF=Math.round(e.currently.temperature),t.tempC=Math.round(I(e.currently.temperature)),t.icon=e.currently.icon,t.description=e.currently.summary,sessionStorage.setItem("weather",JSON.stringify(e)),sessionStorage.setItem("TMWeather",JSON.stringify(e)),a(!0),console.log("StateChanged")}))}),(function(){n(!0)})):alert("Sorry, your browser does not support geolocation services.")}({},e,p,x)}),[]),m?r.a.createElement(s.a,null,r.a.createElement(d,{setUnit:E,props:{variant:"tabs",defaultActiveKey:"/home"}}),r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/Weather/",component:function(){return r.a.createElement(B,{unit:g,weatherInfo:o,setWeather:c,blocked:w,setBlocked:x,loaded:m,setLoaded:p})}}),r.a.createElement(D.a,{exact:!0,path:"/Weather/timemachine",component:function(){return r.a.createElement(q,{unit:g,weatherInfo:o,setWeather:c,blocked:w,setBlocked:x,loaded:m,setLoaded:p})}}))):w?r.a.createElement(h,{colClass:"col col-auto",height:"93vh"},r.a.createElement("div",{className:"blocked"},"Location service blocked, cannot retrieve weather.")):r.a.createElement($,{name:"rotating-plane",color:"white"})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){e.exports=a(193)},90:function(e,t,a){},91:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.0e9338b5.chunk.js.map